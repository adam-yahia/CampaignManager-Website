<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Editor - Campaign Manager</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/editor.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="editor-page">
    <!-- Header -->
    <header class="editor-header">
        <div class="header-content">
            <div class="header-left">
                <a href="index.html" class="back-btn">
                    <i class="fas fa-arrow-left"></i>
                    Back to Dashboard
                </a>
                <h1>Email Campaign Editor</h1>
            </div>
            <div class="header-right">
                <button id="previewBtn" class="btn btn-outline">
                    <i class="fas fa-eye"></i>
                    Preview
                </button>
                <button id="saveEmailBtn" class="btn btn-primary">
                    <i class="fas fa-save"></i>
                    Save Email
                </button>
            </div>
        </div>
    </header>

    <!-- Editor Content -->
    <main class="editor-main">
        <div class="editor-container">
            <!-- Controls Panel -->
            <div class="controls-panel">
                <div class="panel-section">
                    <h3>Campaign Details</h3>
                    <div class="form-group">
                        <label for="emailName">Email Campaign Name</label>
                        <input type="text" id="emailName" placeholder="Enter campaign name" required>
                    </div>
                    <div class="form-group">
                        <label for="emailSubject">Subject Line</label>
                        <input type="text" id="emailSubject" placeholder="Enter email subject">
                    </div>
                </div>

                <div class="panel-section">
                    <h3>Template Selection</h3>
                    <div class="template-options">
                        <label class="template-option">
                            <input type="radio" name="emailTemplate" value="newsletter" checked>
                            <div class="template-preview">
                                <div class="template-thumb newsletter-thumb"></div>
                                <span>Newsletter</span>
                            </div>
                        </label>
                        <label class="template-option">
                            <input type="radio" name="emailTemplate" value="promotional">
                            <div class="template-preview">
                                <div class="template-thumb promotional-thumb"></div>
                                <span>Promotional</span>
                            </div>
                        </label>
                        <label class="template-option">
                            <input type="radio" name="emailTemplate" value="announcement">
                            <div class="template-preview">
                                <div class="template-thumb announcement-thumb"></div>
                                <span>Announcement</span>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>Content Editing</h3>
                    <div class="form-group">
                        <label for="emailHeading">Main Heading</label>
                        <input type="text" id="emailHeading" placeholder="Enter main heading">
                    </div>
                    
                    <div class="form-group">
                        <label for="emailContent">Email Content</label>
                        <textarea id="emailContent" rows="6" placeholder="Enter your email content..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="ctaText">Call-to-Action Text</label>
                        <input type="text" id="ctaText" placeholder="e.g., Shop Now, Learn More">
                    </div>

                    <div class="form-group">
                        <label for="ctaUrl">Call-to-Action URL</label>
                        <input type="url" id="ctaUrl" placeholder="https://example.com">
                    </div>
                </div>

                <div class="panel-section">
                    <h3>Images</h3>
                    <div class="form-group">
                        <label for="headerImage">Header Image URL</label>
                        <input type="url" id="headerImage" placeholder="https://example.com/image.jpg">
                        <small class="form-help">Optional: Add a header image to your email</small>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>Styling</h3>
                    <div class="form-group">
                        <label for="emailFont">Font Family</label>
                        <select id="emailFont">
                            <option value="Arial, sans-serif">Arial (Clean & Modern)</option>
                            <option value="Georgia, serif">Georgia (Classic & Elegant)</option>
                            <option value="'Helvetica Neue', sans-serif">Helvetica (Professional)</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="primaryColor">Primary Color</label>
                            <input type="color" id="primaryColor" value="#007bff">
                        </div>
                        <div class="form-group">
                            <label for="accentColor">Accent Color</label>
                            <input type="color" id="accentColor" value="#28a745">
                        </div>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>Actions</h3>
                    <div class="action-buttons">
                        <button id="resetEmailBtn" class="btn btn-outline">
                            <i class="fas fa-undo"></i>
                            Reset
                        </button>
                        <button id="duplicateEmailBtn" class="btn btn-outline">
                            <i class="fas fa-copy"></i>
                            Duplicate
                        </button>
                    </div>
                </div>
            </div>

            <!-- Preview Panel -->
            <div class="preview-panel">
                <div class="preview-header">
                    <h3>Email Preview</h3>
                    <div class="preview-actions">
                        <button id="mobileViewBtn" class="btn btn-outline" title="Mobile View">
                            <i class="fas fa-mobile-alt"></i>
                        </button>
                        <button id="desktopViewBtn" class="btn btn-outline active" title="Desktop View">
                            <i class="fas fa-desktop"></i>
                        </button>
                    </div>
                </div>
                
                <div class="preview-container email-preview-container">
                    <div id="emailPreview" class="email-preview">
                        <!-- Email content will be generated here -->
                    </div>
                </div>

                <div class="preview-info">
                    <p><strong>Width:</strong> 650px (Standard email width)</p>
                    <p><strong>Compatible:</strong> All major email clients</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Save Modal -->
    <div id="saveModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Save Email Campaign</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="saveStatus">Status</label>
                    <select id="saveStatus">
                        <option value="draft">Save as Draft</option>
                        <option value="published">Ready to Send</option>
                    </select>
                </div>
                <p class="save-info">Your email campaign will be saved to your campaigns.</p>
            </div>
            <div class="modal-footer">
                <button id="cancelSaveBtn" class="btn btn-outline">Cancel</button>
                <button id="confirmSaveBtn" class="btn btn-primary">Save Email</button>
            </div>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/email-editor.js"></script>
    <script>
        // Initialize email editor on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check authentication
            if (!Auth.isLoggedIn()) {
                window.location.href = 'login.html';
                return;
            }
            
            EmailEditor.init();
        });
    </script>
</body>
</html>
